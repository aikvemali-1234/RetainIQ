{% extends "base.html" %}
{% block content %}
<h1>Flashcards</h1>

<p>Card {{ index }} of {{ total }}</p>

{% if card %}
    {# Flip card by submitting action=flip #}
    <form method="post" action="/flashcards/action/{{ doc_id }}" style="margin-bottom: 1rem;">
        <input type="hidden" name="action" value="flip">
        <button type="submit" style="display:block; width:100%; min-height:200px; text-align:center; border-radius:12px; padding:2rem; border:2px solid #4f46e5; background:white; cursor:pointer; font-size:1.2rem; transition: all 0.3s ease;">
            {% if show_back %}
                <div style="color: #059669; font-weight: 600; margin-bottom: 0.5rem;">ANSWER:</div>
                <div>{{ card.back }}</div>
            {% else %}
                <div style="color: #4f46e5; font-weight: 600; margin-bottom: 0.5rem;">QUESTION:</div>
                <div>{{ card.front }}</div>
            {% endif %}
        </button>
        <p style="text-align: center; color: #6b7280; margin-top: 0.5rem;">
            <em>Click the card to flip</em>
        </p>
    </form>

    <div style="display:flex; gap:0.75rem; align-items:center; flex-wrap:wrap; justify-content: center;">
        <form method="post" action="/flashcards/action/{{ doc_id }}">
            <input type="hidden" name="action" value="prev">
            <button type="submit" class="primary-button" style="padding:.6rem 1.2rem; {% if index == 1 %}opacity: 0.5; cursor: not-allowed;{% endif %}">
                ← Previous
            </button>
        </form>

        {% if index < total %}
            <form method="post" action="/flashcards/action/{{ doc_id }}">
                <input type="hidden" name="action" value="next">
                <button type="submit" class="primary-button" style="padding:.6rem 1.2rem;">
                    Next →
                </button>
            </form>
        {% else %}
            <a href="/dashboard" class="primary-button" style="padding:.6rem 1.2rem; background: #059669; text-decoration: none; display: inline-block;">
                ✓ Done
            </a>
        {% endif %}
    </div>

{% else %}
    <div style="padding: 2rem; text-align: center; background: #fee2e2; border-radius: 8px;">
        <p style="color: #b91c1c; font-weight: 600;">No flashcards available for this document.</p>
        <a href="/dashboard" style="margin-top: 1rem; display: inline-block;">← Back to Dashboard</a>
    </div>
{% endif %}

<style>
    .primary-button {
        background-color: #4f46e5;
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        border: none;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .primary-button:hover {
        background-color: #4338ca;
        transform: translateY(-2px);
    }

    .primary-button:active {
        transform: translateY(0);
    }

    button[type="submit"]:hover {
        background-color: #f8f8ff;
        border-color: #4338ca;
    }
</style>

{% endblock %}