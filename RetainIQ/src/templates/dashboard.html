{% extends "base.html" %}
{% block content %}

<div class="dashboard-header">
    <h2>Welcome back, {{ display_name }}</h2>
</div>

<!-- TOP STATS -->
<div class="stats-grid">
    <div class="stat-card">
        <h3>Total Quizzes</h3>
        <p>{{ total_quizzes }}</p>
    </div>
    <div class="stat-card">
        <h3>Total Flashcards</h3>
        <p>{{ total_flashcards }}</p>
    </div>
    <div class="stat-card">
        <h3>Total Study Sets</h3>
        <p>{{ documents|length }}</p>
    </div>
</div>

<!-- MAIN ACTION BUTTON -->
<div style="margin: 1.5rem 0;">
    <a href="/upload" class="primary-button">
        Start a New Revision Session
    </a>
</div>

<hr style="margin: 2rem 0;">


<!-- STUDY SET LIST -->
<h3>Your Study Sets</h3>

{% if documents %}
    <div class="study-list">
        {% for d in documents %}
            <div class="study-card">
                <div class="study-info">
                    <h4>{{ d.filename }}</h4>
                    <p>
  Uploaded:
  {% if d.created_at %}
    {{ d.created_at.strftime('%d %b %Y') }}
  {% else %}
    Unknown
  {% endif %}
</p>

                </div>

                <div class="study-actions">
                    <a href="/dashboard/doc/{{ d.id }}" class="primary-button small">
                        Open
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>You have not uploaded any study materials yet.</p>
{% endif %}

<style>
    .dashboard-header h2 {
        margin-bottom: 2rem;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: #f8f8ff;
        padding: 1rem;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }

    .primary-button {
        background-color: #4f46e5;
        color: white;
        padding: 0.6rem 1.4rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
    }

    .primary-button.small {
        padding: 0.4rem 1rem;
        border-radius: 6px;
        font-size: 0.9rem;
    }

    .study-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .study-card {
        background: #ffffff;
        padding: 1rem;
        border-radius: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .study-info h4 {
        margin: 0 0 0.2rem 0;
    }

</style>

{% endblock %}
