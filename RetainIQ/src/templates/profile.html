{% extends "base.html" %}
{% block content %}
<h2>Your Profile</h2>

<div class="card">
    <p><strong>Name:</strong> {{ user.name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Total Points:</strong> {{ user.total_points }}</p>
    <p><strong>Best Score:</strong> {{ user.best_score }}</p>
    <p><strong>LinkedIn:</strong>
        {% if user.linkedin_url %}
            <a href="{{ user.linkedin_url }}" target="_blank">{{ user.linkedin_url }}</a>
        {% else %}
            Not set
        {% endif %}
    </p>
    <form method="post" action="/profile/linkedin">
        <label>Update LinkedIn URL</label>
        <input type="url" name="linkedin_url" value="{{ user.linkedin_url or '' }}">
        <button type="submit">Save</button>
    </form>
</div>

<div class="card">
    <h3>Badges</h3>
    {% if badges %}
        <ul>
            {% for b in badges %}
            <li>{{ b }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No badges yet. Take more quizzes!</p>
    {% endif %}
</div>

<div class="card">
    <h3>Recent Quiz Attempts</h3>
    {% if attempts %}
        <ul>
            {% for a in attempts %}
            <li>
                {{ a.created_at }} – Score: {{ a.score }} / {{ a.total_questions * 10 }}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No quiz attempts yet.</p>
    {% endif %}
</div>

<div class="card">
    <h3>Leaderboard (Top 5)</h3>
    {% if top_users %}
        <ol>
            {% for u in top_users %}
            <li>{{ u.name }} – {{ u.total_points }} pts</li>
            {% endfor %}
        </ol>
    {% else %}
        <p>No users yet.</p>
    {% endif %}
</div>
{% endblock %}

